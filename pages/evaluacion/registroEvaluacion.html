<h3>
	<i class="fa fa-angle-right"></i>
	Registro de Evaluaciones
</h3>
<div class="row mt">
  <div class="col-lg-12">
    <div class="content-panel">
      <h4><i class="fa fa-angle-right"></i> Evaluacion</h4>
	    <div class="row">
          <div class="col-sm-6 col-lg-6">
            <div class="form-group" ng-class="{'has-error':newClaseForm.nivel.$error.required, 'has-success':newClaseForm.nivel.$valid}">
              <label class="col-md-4 control-label" for="nivel">Curso:</label>
              <div class="col-md-8">
                <div class="input-group">                                            
                  <select id="nivel" name="nivel" ng-change="mtdSelectCurso(curso)" ng-model="curso" ng-options="value as value.nivel+' - '+value.grado+' - '+value.paralelo+' - '+value.turno for (key, value) in cursos" class="form-control" required>
                    <option value="">-- Seleccione Curso --</option>
                  </select>
                  <span ng-if="newClaseForm.nivel.$error.required" class="glyphicon glyphicon-remove form-control-feedback"></span>
                  <span ng-if="newClaseForm.nivel.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                </div>
                <span ng-if="newClaseForm.nivel.$error.required" class="help-block">El nivel es requerido</span>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-6">                
            <div class="form-group" ng-class="{'has-error':newClaseForm.grado.$error.required, 'has-success':newClaseForm.grado.$valid}">
              <label class="col-md-4 control-label" for="grado">Asignatura:</label>
              <div class="col-md-8">
                <div class="input-group">                      
                  <select id="grado" name="grado" ng-model="asignado" ng-change="mtdView(curso, asignado)" ng-options="value as value.asignatura for (key, value) in asignados" class="form-control" required>
                    <option value="">-- Seleccione Asignatura --</option>
                  </select>
                  <span ng-if="newClaseForm.grado.$error.required" class="glyphicon glyphicon-remove form-control-feedback"></span>
                  <span ng-if="newClaseForm.grado.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>                      
                </div>
                <span ng-if="newClaseForm.grado.$error.required" class="help-block">El grado es requerido</span>
              </div>
            </div>
          </div>              
      </div> 
      <div class="row">
      	 <div class=" col-lg-6">
          <div class="form-group">
              <label class="col-md-4 control-label" for="periodos"> Bimestre::</label>
              <div class="col-md-8">
                <div class="input-group">                      
                  <select id="periodos" class="form-control" ng-change="mtdVer2(periodo, asignado, curso)" ng-model="periodo" ng-options="value as value.descripcion for (key, value) in periodos">
                     <option>Seleccione</option>
                  </select>
                  <span ng-if="newClaseForm.grado.$error.required" class="glyphicon glyphicon-remove form-control-feedback"></span>
                  <span ng-if="newClaseForm.grado.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>                      
                </div>                
              </div>
            </div>	     
        </div>
	    </div>        
        <br/>
        <tabset>            
          <tab ng-repeat="actividad in actividades" select="mtdVer1(actividad, asignado, curso)">
            <tab-heading>{{actividad.descripcion}}</tab-heading>
            <section class="unseen">
            <table class="table table-bordered table-hover table-condensed">
              <thead style="background-color:#7a31aa; color:white;">
                <tr>
                  <th rowspan="2">Nro.</th>
                  <th rowspan="2">Apellidos y Nombres</th>
                  <th ng-repeat="dimension in dimensiones" colspan="{{ dimension.columnas }}" ><center>{{ dimension.dimension}}</center></th>
                  <th rowspan="2">Nota Final</th>
                  <th rowspan="2"><center><span ng-click="mtdAddCriterio(periodo.id, actividad.id, asignado)"><i class=" fa fa-plus"></i></span></center></th>                    
                </tr>
                <tr>
               	   <th ng-repeat="criterio in criterios" context-menu="menuCriterios" ng-class="{rotate: criterio.idcriterio === criterio.iddimension }">
                    <div tooltip-placement="top" tooltip="{{criterio.criterio}}" ng-if="criterio.idcriterio !== criterio.iddimension" style="font-size:10px"><span>{{criterio.criterio | limitTo: 20}}<br/>{{ criterio.criterio.length > 20 ? '...' : ''}}</span></div>
                    <div ng-if="criterio.idcriterio == criterio.iddimension" style="font-size:10px"><span>{{criterio.criterio }}</span></div>
                  </th>
               	</tr>
              </thead>
              <tbody>
                <tr ng-repeat="estudiante in estudiantes">
                  <td>{{ $index + 1 }}</td>                    
                  <td>{{ estudiante.paterno }} {{ estudiante.materno }}, {{ estudiante.nombres }}</td>                    
                  <td ng-repeat="criterio in criterios" align="right" ng-dblclick="mtdEvaluar(estudiante, criterio, idAsignado)" ng-class="{ promedio: criterio.idcriterio === criterio.iddimension }">
                    <span ng-if="criterio.idcriterio == criterio.iddimension">
                      <span ng-if="promedios[estudiante.id][criterio.idcriterio]['promedio'] > promedios[estudiante.id][criterio.idcriterio]['valor']" style="font-size:16px; font-weight: bold; color: black;">{{ promedios[estudiante.id][criterio.idcriterio]['promedio'] }} </span>
                      <span ng-if="promedios[estudiante.id][criterio.idcriterio]['promedio'] <= promedios[estudiante.id][criterio.idcriterio]['valor']" style="font-size:16px; font-weight: bold; color: red;">{{ promedios[estudiante.id][criterio.idcriterio]['promedio'] }} </span>
                    </span>
                    <span ng-if="criterio.idcriterio != criterio.iddimension">
                      <span ng-if="evaluaciones[estudiante.id][criterio.idcriterio]['cuantitativo'] > 0" style="white-space: nowrap;">
                        <span ng-if="evaluaciones[estudiante.id][criterio.idcriterio]['cuantitativo'] >= 51" style="font-size:16px; font-weight: bold; color: black;">{{ evaluaciones[estudiante.id][criterio.idcriterio]['valor'] | number }} </span>
                        <span ng-if="evaluaciones[estudiante.id][criterio.idcriterio]['cuantitativo'] < 51" style="font-size:16px; font-weight: bold; color:red;">{{ evaluaciones[estudiante.id][criterio.idcriterio]['valor'] | number}} </span>
                        | &nbsp; <span style="font-size:10px;"> {{ evaluaciones[estudiante.id][criterio.idcriterio]['cuantitativo'] | number}} </span>
                        | &nbsp; <span style="font-size:10px;"> {{ evaluaciones[estudiante.id][criterio.idcriterio]['cualitativo'] }} </span>
                      </span>
                    </span>
                  </td>
                  <td align="right">                    
                    <span ng-if="notas[estudiante.id]['nota'] >= 51" style="font-size:16px; font-weight: bold; color: black;">{{ notas[estudiante.id]['nota'] }}</span>
                    <span ng-if="notas[estudiante.id]['nota'] < 51" style="font-size:16px; font-weight: bold; color: red;">{{ notas[estudiante.id]['nota'] }}</span>
                  </td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </section>
          </tab>
          <tab>
            <tab-heading><i class="glyphicon glyphicon-plus" ng-click="mtdAddActividad(periodo, asignado)"></i></tab-heading>
          </tab>
          <tab>
            <tab-heading> Promedio por Dimensiones </tab-heading>
          </tab>
          <tab>
            <tab-heading> Promedio por Actividades </tab-heading>
          </tab>
        </tabset>                  
    </div>
  </div>
</div>
<style>
.promedio{
  background-color: rgb(212,212,212);
}
th.rotate {
  /* Something you can count on */
  height: 50px;  
  white-space: nowrap;  
  margin:0 auto 0 auto;
}

th.rotate > div {
  display: block;
  width:20px;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}
th.rotate > div > span {
  /*border-bottom: 1px solid #ccc;*/
  /*padding: 5px 10px;*/  

}
</style>